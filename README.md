<htmlform>
    <!-- Autogenerated example form  (template from 01-Nov-2010 -->
    <macros>
      paperFormId = (Fill this in)
      headerColor =#009d8e
      fontOnHeaderColor = white
    </macros>

    <style>
    .headerinfo {
      position: relative;
  overflow: hidden;
  background: #F9F9F9;
  z-index: 0;
  border-bottom: 2px solid #EEE;
  margin: -9px -9px 10px -9px;
  padding: 5px 10px;
  min-height: 60px;
  width: 100%;
    }

    .who-when-where {
margin-bottom: 6px;
border-bottom: 1px solid #ccc;
width: 80%;
border: 2px solid;
height: 150px;
background-color: beige;
}

      .section {
        border: 1px solid $headerColor;
        padding: 2px;
        text-align: left;
        margin-bottom: 1em;
      }
      .sectionHeader {
        background-color: $headerColor;
        color: $fontOnHeaderColor;
        display: block;
        padding: 2px;
        font-weight: bold;
      }
      table.baseline-aligned td {
        vertical-align: baseline;
      }

      .button{
        -webkit-appearance: none;
-webkit-background-clip: border-box;
-webkit-background-origin: padding-box;
-webkit-background-size: auto;
-webkit-font-smoothing: auto;
-webkit-writing-mode: horizontal-tb;
align-items: flex-start;
background-attachment: scroll;
background-clip: border-box;
background-color: rgb(255, 61, 61);
background-image: -webkit-linear-gradient(top, rgb(255, 102, 102), rgb(255, 61, 61));
background-origin: padding-box;
background-size: auto;
border-bottom-color: rgb(255, 61, 61);
border-bottom-left-radius: 3px;
border-bottom-right-radius: 3px;
border-bottom-style: solid;
border-bottom-width: 1px;
border-image-outset: 0px;
border-image-repeat: stretch;
border-image-slice: 100%;
border-image-source: none;
border-image-width: 1;
border-left-color: rgb(255, 61, 61);
border-left-style: solid;
border-left-width: 1px;
border-right-color: rgb(255, 61, 61);
border-right-style: solid;
border-right-width: 1px;
border-top-color: rgb(255, 61, 61);
border-top-left-radius: 3px;
border-top-right-radius: 3px;
border-top-style: solid;
border-top-width: 1px;
box-sizing: border-box;
color: rgb(255, 255, 255);
cursor: pointer;
display: inline-block;
font-family: OpenSans, Arial, sans-serif;
font-size: 16px;
height: 50px;
letter-spacing: normal;
line-height: 19.200000762939453px;
margin-bottom: 0px;
margin-left: 0px;
margin-right: 10px;
margin-top: 0px;
max-width: 250px;
min-width: 0px;
padding-bottom: 8px;
padding-left: 20px;
padding-right: 20px;
padding-top: 8px;
text-align: center;
text-decoration: none solid rgb(255, 255, 255);
text-indent: 0px;
text-shadow: none;
text-transform: none;
width: 300px;
word-spacing: 0px;
writing-mode: lr-tb;
      }

.datacollection{
  -webkit-font-smoothing: subpixel-antialiased;
color: rgb(54, 52, 99);
display: inline-block;
font-family: OpenSans, Arial, sans-serif;
font-size: 16px;
height: 84.34375px;
vertical-align: top;
width: 568.390625px;
}

.autoCompleteHidden{
  -webkit-appearance: none;
-webkit-font-smoothing: auto;
-webkit-rtl-ordering: logical;
-webkit-user-select: text;
-webkit-writing-mode: horizontal-tb;
background-color: rgb(255, 255, 255);
border-bottom-color: rgb(221, 221, 221);
border-bottom-style: solid;
border-bottom-width: 1px;
border-image-outset: 0px;
border-image-repeat: stretch;
border-image-slice: 100%;
border-image-source: none;
border-image-width: 1;
border-left-color: rgb(221, 221, 221);
border-left-style: solid;
border-left-width: 1px;
border-right-color: rgb(221, 221, 221);
border-right-style: solid;
border-right-width: 1px;
border-top-color: rgb(221, 221, 221);
border-top-style: solid;
border-top-width: 1px;
color: rgb(54, 52, 99);
cursor: auto;
display: block;
font-family: OpenSans, Arial, sans-serif;
font-size: 16px;
height: 22px;
letter-spacing: normal;
line-height: normal;
margin-bottom: 0px;
margin-left: 0px;
margin-right: 0px;
margin-top: 5.671875px;
min-width: 80%;
padding-bottom: 5px;
padding-left: 10px;
padding-right: 10px;
padding-top: 5px;
text-align: start;
text-indent: 0px;
text-shadow: none;
text-transform: none;
width: 454.703125px;
word-spacing: 0px;
writing-mode: lr-tb;

}

input#w9 {
width: 250px;

}

input#w8 {
clear: none;
margin-right: 50px;
}

#rohan {  
-webkit-appearance: none;
-webkit-background-clip: border-box;
-webkit-background-origin: padding-box;
-webkit-background-size: auto;
-webkit-font-smoothing: auto;
-webkit-writing-mode: horizontal-tb;
align-items: flex-start;
background-attachment: scroll;
background-clip: border-box;
/* background-color: rgb(255, 61, 61); */
/* background-image: -webkit-linear-gradient(top, rgb(255, 102, 102), rgb(255, 61, 61)); */
background-origin: padding-box;
background-size: auto;
/* border-bottom-color: rgb(255, 61, 61); */
/* border-bottom-left-radius: 3px; */
/* border-bottom-right-radius: 3px; */
/* border-bottom-style: solid; */
border-bottom-width: 1px;
border-image-outset: 0px;
border-image-repeat: stretch;
border-image-slice: 100%;
border-image-source: none;
border-image-width: 1;
/* border-left-color: rgb(255, 61, 61); */
border-left-style: solid;
border-left-width: 1px;
/* border-right-color: rgb(255, 61, 61); */
border-right-style: solid;
border-right-width: 1px;
/* border-top-color: rgb(255, 61, 61); */
border-top-left-radius: 3px;
border-top-right-radius: 3px;
border-top-style: solid;
border-top-width: 1px;
box-sizing: border-box;
color: rgb(255, 255, 255);
cursor: pointer;
display: inline-block;
font-family: OpenSans, Arial, sans-serif;
font-size: 16px;
height: 50px;
letter-spacing: normal;
line-height: 19.200000762939453px;
margin-bottom: 0px;
margin-left: 0px;
margin-right: 10px;
margin-top: 0px;
max-width: 250px;
min-width: 0px;
padding-bottom: 8px;
padding-left: 20px;
padding-right: 20px;
padding-top: 8px;
text-align: center;
text-decoration: none solid rgb(255, 255, 255);
text-indent: 0px;
text-shadow: none;
text-transform: none;
width: 200px;
word-spacing: 0px;
writing-mode: lr-tb;
background-color: #009384;
margin-top: 20px;
}
    </style>

    <span style="float:right">Paper Form ID: $paperFormId</span>

      <h2>Visit Note</h2>
    
      <table class="headerinfo" >
        <tr>
          <td>Name:</td>
          <td><lookup class="value" expression="patient.personName"/></td>
            <td>EMR ID:</td>
          <td><lookup class="value" complexExpression="#foreach( $patId in $patientIdentifiers.get('EMR ID') ) $patId #end "/></td>
            <td>Gender:</td>
          <td><lookup class="value" expression="patient.gender"/></td>

          <td>
            <lookup class="value" complexExpression="#if( \$patient.birthdateEstimated ) ~#end"/> <lookup class="value" expression="patient.birthdate"/>
            (Age: <lookup class="value" expression="patient.age"/>)
          </td>

        </tr>
        
        
      </table>        
        
        
        

<h2>Enter Encounter Information (REQUIRED)</h2>
    


    
      <table class="who-when-where">


    
      
      
          <td>Date:</td>
          <td><encounterDate default="today"/></td>
        
        
          <td>Location:</td>
          <td><encounterLocation default="Beachfront Health Center" /></td>
        
        
          <td>Provider:</td>
          <td><encounterProvider/></td>
        
      </table>
    

      <h2>Add Presumed or Confirmed Diagnosis (REQUIRED):</h2>
    
    <h3>If you dont know, enter other non-coded</h3>
      <table class="who-when-where">
        <tr>
          <td>Diagnosis</td>
          <td>
            <obs  conceptId="6542" style = "autocomplete" commentFieldLabel="Clinical Note"/>
<br/>     
          </td>
           
          </tr>
      

        
        
        
        
        
      </table>
    <br/>

    <submit class="button"/>

  <script>
  var a = $j("<div>"+""+"</div>");
          a.attr("id","dialog-message");
   
          $j( "body" ).append(a);
  </script>
      <script>
  function handledata(data)
  { 
     var x = data.toString().split(",");
       console.log(x);

          $j("#dialog-message").html("Did you actually mean: <br/>"+"<br/>"+x[0]+"<br/>(Confidence: "+parseFloat(x[1].substr(0,6))*100+"%)"+"<br/>"+"<br/>Would you like to change your diagnosis ?"+"<br/>"+"<br/>"+x[4]);
        
          console.log(data);
        
        if(x[0] != "noprediction"){

         $j( "#dialog-message" ).dialog({
        
        
        modal: true,
        height:"auto",
        width:"auto",
        buttons: {
          "Yes": function() {
            
            $j('#w8').val(x[0]);
            $j( this ).dialog( "close" );
          },
          "No": function() {
            $j( this ).dialog( "close" );
          }
        }
      });

      $j("#ui-dialog-title-dialog-message").html("Diagknowzit");
      

        }
         
      }
      </script>

  <script>

  $j(document).ready(function() {

    $j("#rohan").click(function(){
    $j('#w8').val("Other Noncoded");
    });

    $j('#w9').attr("size","100")
          console.log("loaded");
   
   
      $j("#w9").blur(function()
    {
          console.log("blurred");
      if($j( "#w9" ).val() != "")
      {
        var curselected = $j('#w8').val();

        if(curselected == "Other non-coded")
        {

              $j.ajax({
                url: "http://localhost:8080/openmrs/module/machinelearning/predictorapi.form",
                data: {"class":$j( "#w9" ).val(),"url":window.location.href},
                success: handledata,
                dataType: "json"
              });
         }
       }
    });








   
  });

   
   
      
   
   </script>

   <script>
   var val = ["", "Abdominal Pain", "Abnormal weight loss", "Absent", "Acne", "Acute Hepatitis B", "Acute Myocarditis", "Acute Pericarditis", "Acute Sinusitis", "Acute Tonsillitis", "Acute appendicitis", "Acute flassic paralysis", "Acute lower respiratory infection", "Alcoholic Liver Damage", "Allergy", "Amenorrhea", "Anemia", "Anorexia", "Ascites", "Asthma", "Bacterial Pneumonia", "Bacterial meningitis", "Benign Neoplasm Of Breast", "Bronchitis", "Bronchitis, Acute", "Cardiac Arrest", "Cellulitis", "Cervical dysplasia", "Chest Pain", "Cholera", "Chronic Bronchitis", "Cognitive impairment", "Common cold", "Confirmed malaria", "Congenital Syphilis (infant under 1 year old)", "Cough", "Cutaneous abscess, furuncle and carbuncle", "Cutaneous anthrax", "Dengue", "Dengue Haemorrhagic Fever", "Dental problem", "Diabetes", "Diarrhea", "Diarrhea, bloody", "Diphtheria", "Dog bite", "Duodenal Ulcer", "Dysmenorrhea ", "Dyspepsia", "Dysphagia", "Dyspnea", "Eclampsia", "Edema", "Epigastric pain", "Epilepsy", "Febrile rash", "Fever of unknown origin", "Filariasis", "Flatulence And Related Conditions", "Fracture", "Fungal Infection", "Gastric Ulcer", "Gastro-oesophageal reflux", "Gastroduodenitis", "Gastroenteritis and colitis", "Genital Ulcers, Chancroid", "Goiter", "Gonorrhea", "Haemorrhage In Early Pregnancy", "Headache", "Headache, Migraine", "Heart Failure", "Helminthiasis", "Hemorrhage", "Hemorrhoids", "Hepatitis A", "Herpes Simplex, NOS", "Herpes Zoster", "Human Immunodeficiency Virus", "Hydrocele and spermatocele", "Hyperplasia Of Prostate", "Hypertension", "Hypertensive Heart Disease", "Icteric Febrile syndrome", "Impetigo", "Infectious Disease Nos", "Inflammatory Disease Of Uterus", "Influenza", "Inguinal Hernia", "Intestinal Infection", "Intestinal Parasites", "Intracerebral hemorrhage", "Ischemic Heart Disease", "Jaundice", "Kwashiorkor", "Leprosy", "Leptospirosis", "Leukorrhea", "Low Back Pain", "Lymphadenopathy","Malaise and Fatigue", "Malaria", "Malignant Neoplasm Of Breast", "Malignant Tumor Of Intestine", "Malignant Tumor Of Scrotum", "Malignant neoplasm of lung", "Malnutrition M1", "Malnutrition M3", "Marasmic Kwashiorkor", "Marasmus", "Marriage certificate without diagnosis", "Mastitis", "Measles", "Medical certificate without diagnosis", "Meningococcemia", "Miliary Tuberculosis", "Mumps", "Nausea and vomiting", "Neonatal conjunctivitis", "Neonatal septicemia", "Neonatal tetanus", "Neoplasm", "Neuropathy", "Nothing", "Obstetrical Tetanus", "Open Wound", "Orchitis and Epididymitis", "Osteomyelitis", "Otalgia", "Other non-coded", "Otitis Externa", "Otitis Media", "Pain", "Painful micturition", "Pelvic and Perineal Pain", "Peptic Ulcer", "Perforation Of Tympanic Membrane", "Pertussis", "Pharyngolaryngitis", "Pneumonia", "Pneumothorax", "Pre-existing hypertension complicating pregnancy and childbirth", "Pregnancy, Ectopic", "Pregnancy, Pre Eclampsia", "Prolonged Pregnancy", "Prostatitis", "Pruritis", "Pulmonary Edema", "Pulmonary effusion", "Pyoderma", "Pyogenic arthritis", "Pyothorax ", "Rabies", "Renal Failure", "Rheumatic Fever Without Heart Involvement", "Salmonella Infection", "Scabies", "Senile Cataract", "Septicaemia", "Sexually Transmitted Chlamydial", "Sexually Transmitted Infection", "Sinusitis", "Status Epilepticus", "Syphilis", "Tetanus", "Tinea corporis", "Tinea, NOS", "Transport Accident", "Trichomoniasis", "Tuberculosis", "Tuberculosis Of Central Nervous System", "Typhoid Fever", "Ulceration Of Vulva", "Unspecified Abortion", "Upper respiratory tract infection", "Urethral Discharge", "Urinary tract infection", "Varicella", "Vertigo", "Viral Conjunctivitis ", "Viral Hemorrhagic Fever", "Viral Hepatitis", "Viral Meningitis", "Xerophthalmia"];


$j("#w8").removeAttr("onfocus");
$j("#w8").removeAttr("onchange");
$j("#w8").removeAttr("onblur");
$j("#w8").removeAttr("autocomplete");




 $j( "#w8" ).autocomplete({

      source: val,
      select: function(event,ui)
      {
        console.log("selected");
        console.log(ui.item.value);
        if(ui.item.value=="Other non-coded"){
          

          $j("#w9").attr("placeholder","What's wrong with the patient?");
          $j("#w9").focus();
        }
      }
    });
   

   </script>

   

   

   


  </htmlform>
